<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ page.title }}</title>
    <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <script>
        (function() {
            const theme = localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
            document.documentElement.setAttribute('data-theme', theme);
        })();
    </script>
</head>
<body>

    <!-- Navigation -->
    <nav class="navbar">
        <div class="container nav-wrapper">
            <a href="{{ '/' | relative_url }}" class="nav-brand">{{ site.title }}</a>
            <div class="nav-links">
                {% for link in site.navigation %}
                <a href="{{ link.url | relative_url }}">{{ link.title }}</a>
                {% endfor %}
                <button id="theme-toggle" class="theme-toggle" aria-label="Toggle Dark Mode">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Container -->
    <div class="container">
        {% if page.layout_type == 'home' %}
            <!-- Single Column Layout with Hero Header -->
            <div class="home-layout">
                <header class="home-header">
                    <div class="header-text">
                        <h1 class="header-name">{{ page.name | default: page.title }}</h1>
                        <div class="header-bio">{{ page.bio_role }}</div>
                        <div class="header-bio">{{ page.bio_school }}</div>
                        <div class="header-email">{{ page.email }}</div>
                        
                        <div class="header-actions">
                            <!-- Social Icons -->
                            <div class="social-links">
                                {% for social in page.socials %}
                                <a href="{{ social.url }}" target="_blank" rel="noopener noreferrer" title="{{ social.name }}">
                                    {% if social.icon %}
                                        <i class="{{ social.icon }}"></i>
                                    {% else %}
                                        {{ social.name }}
                                    {% endif %}
                                </a>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                    
                    <div class="header-avatar-container">
                        <img src="{{ page.avatar | relative_url }}" alt="{{ page.name }}" class="avatar">
                    </div>
                </header>

                <main class="main-content">
                    {{ content }}
                </main>
            </div>
        {% else %}
            <!-- Single Column for CV, Publications, etc. -->
            <main class="main-content single-column">
                <h1>{{ page.title }}</h1>
                {{ content }}
            </main>
        {% endif %}
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            &copy; {{ "now" | date: "%Y" }} {{ site.title }}.
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var links = document.getElementsByTagName('a');
            for (var i = 0; i < links.length; i++) {
                if (links[i].hostname !== window.location.hostname || links[i].href.endsWith('.pdf')) {
                    links[i].target = '_blank';
                    links[i].rel = 'noopener noreferrer';
                }
            }
        });
    </script>
    <script src="{{ '/assets/js/theme-toggle.js' | relative_url }}"></script>

</body>
</html>